{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nexport default {\n  name: \"CommonSearchDialog\",\n  props: {\n    visible: {\n      type: Boolean,\n      required: true\n    },\n    title: {\n      type: String,\n      default: \"Dialog\"\n    },\n    tableData: {\n      type: Array,\n      default: () => []\n    },\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    filters: {\n      type: Array,\n      default: () => [] // 动态条件配置\n    }\n  },\n  data() {\n    return {\n      localVisible: this.visible,\n      filterValues: {},\n      // 存储筛选条件值\n      filteredData: [] // 筛选后的数据\n    };\n  },\n  watch: {\n    visible(newVal) {\n      this.localVisible = newVal;\n    },\n    localVisible(newVal) {\n      this.$emit(\"update:visible\", newVal);\n    },\n    tableData: {\n      handler(newData) {\n        this.applyFilters(newData);\n      },\n      immediate: true\n    },\n    filterValues: {\n      handler() {\n        this.applyFilters(this.tableData);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    closeDialog() {\n      this.localVisible = false;\n    },\n    handleClose() {\n      this.localVisible = false;\n    },\n    onFilterChange() {\n      this.applyFilters(this.tableData);\n    },\n    applyFilters(data) {\n      this.filteredData = data.filter(item => {\n        return Object.keys(this.filterValues).every(key => {\n          return this.filterValues[key] ? String(item[key]).includes(this.filterValues[key]) : true;\n        });\n      });\n    }\n  },\n  mounted() {\n    // 初始化过滤条件值\n    this.filters.forEach(filter => {\n      this.$set(this.filterValues, filter.prop, \"\");\n    });\n    this.filteredData = this.tableData;\n  }\n};","map":{"version":3,"names":["name","props","visible","type","Boolean","required","title","String","default","tableData","Array","columns","filters","data","localVisible","filterValues","filteredData","watch","newVal","$emit","handler","newData","applyFilters","immediate","deep","methods","closeDialog","handleClose","onFilterChange","filter","item","Object","keys","every","key","includes","mounted","forEach","$set","prop"],"sources":["src/components/CommonSearchDialog.vue"],"sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"localVisible\" :title=\"title\" @close=\"handleClose\">\r\n    <!-- 动态条件区域 -->\r\n    <el-form :model=\"filterValues\" label-width=\"120px\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col v-for=\"filter in filters\" :key=\"filter.prop\" :span=\"8\">\r\n          <el-form-item :label=\"filter.label\">\r\n            <component\r\n              :is=\"filter.type\"\r\n              v-model=\"filterValues[filter.prop]\"\r\n              v-bind=\"filter.props\"\r\n              @input=\"onFilterChange\"\r\n            ></component>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <!-- 表格区域 -->\r\n    <el-table :data=\"filteredData\" border>\r\n      <el-table-column\r\n        v-for=\"column in columns\"\r\n        :key=\"column.prop\"\r\n        :prop=\"column.prop\"\r\n        :label=\"column.label\"\r\n        :width=\"column.width\"\r\n      ></el-table-column>\r\n    </el-table>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"closeDialog\">閉じる</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"CommonSearchDialog\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"Dialog\",\r\n    },\r\n    tableData: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    columns: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    filters: {\r\n      type: Array,\r\n      default: () => [], // 动态条件配置\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      localVisible: this.visible,\r\n      filterValues: {}, // 存储筛选条件值\r\n      filteredData: [], // 筛选后的数据\r\n    };\r\n  },\r\n  watch: {\r\n    visible(newVal) {\r\n      this.localVisible = newVal;\r\n    },\r\n    localVisible(newVal) {\r\n      this.$emit(\"update:visible\", newVal);\r\n    },\r\n    tableData: {\r\n      handler(newData) {\r\n        this.applyFilters(newData);\r\n      },\r\n      immediate: true,\r\n    },\r\n    filterValues: {\r\n      handler() {\r\n        this.applyFilters(this.tableData);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  methods: {\r\n    closeDialog() {\r\n      this.localVisible = false;\r\n    },\r\n    handleClose() {\r\n      this.localVisible = false;\r\n    },\r\n    onFilterChange() {\r\n      this.applyFilters(this.tableData);\r\n    },\r\n    applyFilters(data) {\r\n      this.filteredData = data.filter((item) => {\r\n        return Object.keys(this.filterValues).every((key) => {\r\n          return this.filterValues[key]\r\n            ? String(item[key]).includes(this.filterValues[key])\r\n            : true;\r\n        });\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 初始化过滤条件值\r\n    this.filters.forEach((filter) => {\r\n      this.$set(this.filterValues, filter.prop, \"\");\r\n    });\r\n    this.filteredData = this.tableData;\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n</style>\r\n"],"mappings":";;;;AAkCA;EACAA,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAC,OAAA;IACA;IACAC,SAAA;MACAN,IAAA,EAAAO,KAAA;MACAF,OAAA,EAAAA,CAAA;IACA;IACAG,OAAA;MACAR,IAAA,EAAAO,KAAA;MACAF,OAAA,EAAAA,CAAA;IACA;IACAI,OAAA;MACAT,IAAA,EAAAO,KAAA;MACAF,OAAA,EAAAA,CAAA;IACA;EACA;EACAK,KAAA;IACA;MACAC,YAAA,OAAAZ,OAAA;MACAa,YAAA;MAAA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;IACAf,QAAAgB,MAAA;MACA,KAAAJ,YAAA,GAAAI,MAAA;IACA;IACAJ,aAAAI,MAAA;MACA,KAAAC,KAAA,mBAAAD,MAAA;IACA;IACAT,SAAA;MACAW,QAAAC,OAAA;QACA,KAAAC,YAAA,CAAAD,OAAA;MACA;MACAE,SAAA;IACA;IACAR,YAAA;MACAK,QAAA;QACA,KAAAE,YAAA,MAAAb,SAAA;MACA;MACAe,IAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAZ,YAAA;IACA;IACAa,YAAA;MACA,KAAAb,YAAA;IACA;IACAc,eAAA;MACA,KAAAN,YAAA,MAAAb,SAAA;IACA;IACAa,aAAAT,IAAA;MACA,KAAAG,YAAA,GAAAH,IAAA,CAAAgB,MAAA,CAAAC,IAAA;QACA,OAAAC,MAAA,CAAAC,IAAA,MAAAjB,YAAA,EAAAkB,KAAA,CAAAC,GAAA;UACA,YAAAnB,YAAA,CAAAmB,GAAA,IACA3B,MAAA,CAAAuB,IAAA,CAAAI,GAAA,GAAAC,QAAA,MAAApB,YAAA,CAAAmB,GAAA,KACA;QACA;MACA;IACA;EACA;EACAE,QAAA;IACA;IACA,KAAAxB,OAAA,CAAAyB,OAAA,CAAAR,MAAA;MACA,KAAAS,IAAA,MAAAvB,YAAA,EAAAc,MAAA,CAAAU,IAAA;IACA;IACA,KAAAvB,YAAA,QAAAP,SAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}