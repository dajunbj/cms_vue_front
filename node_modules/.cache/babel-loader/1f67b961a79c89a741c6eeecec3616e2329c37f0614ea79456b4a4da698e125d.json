{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport axios from 'axios';\nexport default {\n  name: \"CommonSearchDialog\",\n  props: {\n    visible: {\n      type: Boolean,\n      required: true\n    },\n    title: {\n      type: String,\n      default: \"Dialog\"\n    },\n    tableData: {\n      type: Array,\n      default: () => []\n    },\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    filters: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      localVisible: this.visible,\n      filterValues: {},\n      searchResult: []\n    };\n  },\n  watch: {\n    visible(newVal) {\n      this.localVisible = newVal;\n    },\n    localVisible(newVal) {\n      this.$emit(\"update:visible\", newVal);\n    },\n    tableData: {\n      handler(newData) {\n        this.applyFilters(newData);\n      },\n      immediate: true\n    },\n    filterValues: {\n      handler() {\n        this.applyFilters(this.tableData);\n      },\n      deep: true\n    }\n  },\n  //◆メソッド定義\n  methods: {\n    //子画面を閉じる\n    closeDialog() {\n      this.localVisible = false;\n    },\n    handleClose() {\n      this.localVisible = false;\n    },\n    //入力条件が変更される場合、既存データによりフィルダーする\n    onFilterChange() {\n      this.searchResult = this.tableData.filter(item => {\n        return Object.keys(this.filterValues).every(key => {\n          return this.filterValues[key] ? String(item[key]).includes(this.filterValues[key]) : true;\n        });\n      });\n    },\n    //会社検索\n    async searchCompanyInfo() {\n      try {\n        console.log(\"111:\" + this.filterValues.name);\n        console.log(\"222:\" + this.filterValues.department);\n        const response = await axios.post('/utils/SearchCompanyList', {\n          name: this.filterValues.name,\n          //名前\n          department: this.filterValues.department //部門\n        });\n        this.searchResult = response.data;\n      } catch (error) {\n        this.$message.error('データの取得に失敗しました' + error);\n      }\n    },\n    // 点击表格行时触发，传递选中数据给父组件\n    rowClick(row) {\n      this.$emit(\"select-company\", row); // 触发事件，传递选中行的数据\n      this.closeDialog(); // 关闭对话框\n    }\n  },\n  //◆画面初期化\n  mounted() {\n    this.searchResult = this.tableData;\n  }\n};","map":{"version":3,"names":["axios","name","props","visible","type","Boolean","required","title","String","default","tableData","Array","columns","filters","data","localVisible","filterValues","searchResult","watch","newVal","$emit","handler","newData","applyFilters","immediate","deep","methods","closeDialog","handleClose","onFilterChange","filter","item","Object","keys","every","key","includes","searchCompanyInfo","console","log","department","response","post","error","$message","rowClick","row","mounted"],"sources":["src/components/CommonSearchDialog.vue"],"sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"localVisible\" :title=\"title\" @close=\"handleClose\">\r\n    <!-- 动态条件区域 -->\r\n    <el-form :model=\"filterValues\" label-width=\"120px\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col v-for=\"filter in filters\" :key=\"filter.prop\" :span=\"20\">\r\n          <el-form-item :label=\"filter.label\">\r\n            <component\r\n              :is=\"filter.type\"\r\n              v-model=\"filterValues[filter.prop]\"\r\n              v-bind=\"filter.props\"\r\n              @input=\"onFilterChange\"\r\n              :style=\"{ width: filter.width + 'px' }\" >\r\n              <el-option\r\n              v-for=\"option in filter.props.options\"\r\n              :key=\"option.value\"\r\n              :label=\"option.label\"\r\n              :value=\"option.value\"\r\n              ></el-option>\r\n          </component>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <!-- 检索按钮 -->\r\n    <div style=\"margin: 10px 0; text-align: right;\">\r\n      <el-button type=\"primary\" @click=\"searchCompanyInfo\">検索</el-button>\r\n    </div>\r\n\r\n    <!-- 表格区域 -->\r\n    <el-table :data=\"searchResult\" border>\r\n      <el-table-column\r\n        v-for=\"column in columns\"\r\n        :key=\"column.prop\"\r\n        :prop=\"column.prop\"\r\n        :label=\"column.label\"\r\n        :width=\"column.width\"\r\n      ></el-table-column>\r\n    </el-table>\r\n\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"closeDialog\">閉じる</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"CommonSearchDialog\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"Dialog\",\r\n    },\r\n    tableData: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    columns: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    filters: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      localVisible: this.visible,\r\n      filterValues: {},\r\n      searchResult: [],\r\n    };\r\n  },\r\n  watch: {\r\n    visible(newVal) {\r\n      this.localVisible = newVal;\r\n    },\r\n    localVisible(newVal) {\r\n      this.$emit(\"update:visible\", newVal);\r\n    },\r\n    tableData: {\r\n      handler(newData) {\r\n        this.applyFilters(newData);\r\n      },\r\n      immediate: true,\r\n    },\r\n    filterValues: {\r\n      handler() {\r\n        this.applyFilters(this.tableData);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  //◆メソッド定義\r\n  methods: {\r\n    //子画面を閉じる\r\n    closeDialog() {\r\n      this.localVisible = false;\r\n    },\r\n    handleClose() {\r\n      this.localVisible = false;\r\n    },\r\n    //入力条件が変更される場合、既存データによりフィルダーする\r\n    onFilterChange() {\r\n      this.searchResult = this.tableData.filter((item) => {\r\n        return Object.keys(this.filterValues).every((key) => {\r\n          return this.filterValues[key]\r\n            ? String(item[key]).includes(this.filterValues[key])\r\n            : true;\r\n        });\r\n      });\r\n    },\r\n\r\n    //会社検索\r\n    async searchCompanyInfo() {\r\n      try {\r\n        console.log(\"111:\"+this.filterValues.name);\r\n        console.log(\"222:\"+this.filterValues.department);\r\n        const response = await axios.post('/utils/SearchCompanyList', \r\n        { name: this.filterValues.name,//名前\r\n          department: this.filterValues.department//部門\r\n        });\r\n        this.searchResult = response.data;\r\n      } catch (error) {\r\n        this.$message.error('データの取得に失敗しました' + error);\r\n      }\r\n    },\r\n\r\n  // 点击表格行时触发，传递选中数据给父组件\r\n  rowClick(row) {\r\n    this.$emit(\"select-company\", row); // 触发事件，传递选中行的数据\r\n    this.closeDialog(); // 关闭对话框\r\n  },\r\n\r\n  },\r\n  //◆画面初期化\r\n  mounted() {\r\n \r\n  this.searchResult = this.tableData;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n</style>"],"mappings":";;;AAkDA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAC,OAAA;IACA;IACAC,SAAA;MACAN,IAAA,EAAAO,KAAA;MACAF,OAAA,EAAAA,CAAA;IACA;IACAG,OAAA;MACAR,IAAA,EAAAO,KAAA;MACAF,OAAA,EAAAA,CAAA;IACA;IACAI,OAAA;MACAT,IAAA,EAAAO,KAAA;MACAF,OAAA,EAAAA,CAAA;IACA;EACA;EACAK,KAAA;IACA;MACAC,YAAA,OAAAZ,OAAA;MACAa,YAAA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;IACAf,QAAAgB,MAAA;MACA,KAAAJ,YAAA,GAAAI,MAAA;IACA;IACAJ,aAAAI,MAAA;MACA,KAAAC,KAAA,mBAAAD,MAAA;IACA;IACAT,SAAA;MACAW,QAAAC,OAAA;QACA,KAAAC,YAAA,CAAAD,OAAA;MACA;MACAE,SAAA;IACA;IACAR,YAAA;MACAK,QAAA;QACA,KAAAE,YAAA,MAAAb,SAAA;MACA;MACAe,IAAA;IACA;EACA;EACA;EACAC,OAAA;IACA;IACAC,YAAA;MACA,KAAAZ,YAAA;IACA;IACAa,YAAA;MACA,KAAAb,YAAA;IACA;IACA;IACAc,eAAA;MACA,KAAAZ,YAAA,QAAAP,SAAA,CAAAoB,MAAA,CAAAC,IAAA;QACA,OAAAC,MAAA,CAAAC,IAAA,MAAAjB,YAAA,EAAAkB,KAAA,CAAAC,GAAA;UACA,YAAAnB,YAAA,CAAAmB,GAAA,IACA3B,MAAA,CAAAuB,IAAA,CAAAI,GAAA,GAAAC,QAAA,MAAApB,YAAA,CAAAmB,GAAA,KACA;QACA;MACA;IACA;IAEA;IACA,MAAAE,kBAAA;MACA;QACAC,OAAA,CAAAC,GAAA,eAAAvB,YAAA,CAAAf,IAAA;QACAqC,OAAA,CAAAC,GAAA,eAAAvB,YAAA,CAAAwB,UAAA;QACA,MAAAC,QAAA,SAAAzC,KAAA,CAAA0C,IAAA,6BACA;UAAAzC,IAAA,OAAAe,YAAA,CAAAf,IAAA;UAAA;UACAuC,UAAA,OAAAxB,YAAA,CAAAwB,UAAA;QACA;QACA,KAAAvB,YAAA,GAAAwB,QAAA,CAAA3B,IAAA;MACA,SAAA6B,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA,mBAAAA,KAAA;MACA;IACA;IAEA;IACAE,SAAAC,GAAA;MACA,KAAA1B,KAAA,mBAAA0B,GAAA;MACA,KAAAnB,WAAA;IACA;EAEA;EACA;EACAoB,QAAA;IAEA,KAAA9B,YAAA,QAAAP,SAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}